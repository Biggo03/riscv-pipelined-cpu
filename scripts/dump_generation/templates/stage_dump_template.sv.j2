//==============================================================//
//  Task File:    {{ stage_name }}_dump_tasks.sv
//  Description:  Auto-generated dump tasks for the '{{ stage_name }}'
//                pipeline stage. Contains hierarchical field dumpers
//                for each struct category ({% for c in struct_fields.keys() %}{{ c }}{% if not loop.last %}, {% endif %}{% endfor %}),
//                used by the top-level pipeline_monitor.
//
//  Author:       Viggo Wozniak
//  Project:      RISC-V Processor
//  Repository:   https://github.com/Biggo03/RISC-V-Pipelined
//
//  Parameters:   N/A
//
//  Notes:        This file is auto-generated. Any modifications
//                should be made in the generator scripts or the
//                associated Jinja template. Do not edit manually.
//==============================================================//

task automatic dump_{{ stage_name }}(int reg_dump_handle);
    $fdisplay(reg_dump_handle, "{{ indent_levels.stage + stage_name }}:");
    {%- for signal_category in struct_fields.keys() %}
    dump_{{ stage_name }}_{{ signal_category }}(reg_dump_handle);
    {%- endfor %}
endtask

{%- for category in struct_fields.keys() %}

task automatic dump_{{ stage_name }}_{{ category }}(int reg_dump_handle);
begin
    $fdisplay(reg_dump_handle, "{{ indent_levels.category + category }}:");

{%- for signal in struct_fields[category] %}
    $fdisplay(reg_dump_handle, "{{ indent_levels.signal + signal}}: 0x%h", {{ hierarchy }}.outputs_{{ stage_name }}.{{ category }}.{{ signal }});
{%- endfor %}
end
endtask;

{%- endfor %}

